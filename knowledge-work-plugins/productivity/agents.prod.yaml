version: v1
kind: ServiceTemplate
variables: []

metadata:
  name: claude-productivity
  description: An agent that uses Anthropic's productivity knowledge work plugin and powered by Claude Sonnet 4.5
  annotations:
    meshagent.service.id: meshagent.claude-productivity

agents:
  - name: claude-productivity
    annotations:
      meshagent.agent.type: ChatBot

container:
  image: us-central1-docker.pkg.dev/meshagent-public/images/cli:{SERVER_VERSION}-esgz
  command: /bin/bash /var/start.sh
  storage:
    room:
    - path: /data
      read_only: false
    files:
    - path: /var/start.sh
      text: |
          #!/bin/bash

          set -e

          mkdir -p /data/knowledge-work-plugins
          mkdir -p /data/agents/claude-productivity
          if [ -d /knowledge-work-plugins ]; then
            cp -R -n /knowledge-work-plugins/* /data/knowledge-work-plugins/ 2>/dev/null || true
          fi
          if [[ ! -f /data/agents/claude-productivity/rules.txt ]]; then
            cp /var/rules-claude-productivity.txt /data/agents/claude-productivity/rules.txt
          fi

          exec /usr/bin/meshagent chatbot join \
            --require-storage \
            --require-web-search \
            --require-web-fetch \
            --storage-tool-local-path=/knowledge-work-plugins:/knowledge-work-plugins \
            --storage-tool-room-path=/:/data \
            --script-tool \
            -rr=agents/claude-productivity/rules.txt \
            --rules-file /data/knowledge-work-plugins/commands/start.md \
            --rules-file /data/knowledge-work-plugins/commands/update.md \
            --skill-dir /data/knowledge-work-plugins/skills/memory-management \
            --skill-dir /data/knowledge-work-plugins/skills/task-management \
    - path: /var/rules-claude-productivity.txt
      read_only: true
      text: |
          ONLY use the knowledge-work-plugins skills to answer questions and follow the pattern specified in the skill
          you can use the storage tool to read skills not just the shell tool
          when a question could be served by a skill, read the skill and follow the pattern specified in the skill
          when using the storage tool to read files attached or referenced by the user, in the room, or output by the shell tool, the file path should be prefixed with /data.
          when using the storage tool to read skills, the path should be prefixed with /data/knowledge-work-plugins (the folder where the plugins are located)
          You have customizable rules stored in agents/claude-productivity/rules.txt, you can use the read_file tool to read your rules. You can use the write_file tool to update the contents of the rules file or other text files. Use the read_file tool to read PDFs, examine images, or read files with a text/* mime type from attachments or files.
          You are a MeshAgent agent. MeshAgent is an agent operating system. You can find out more at www.meshagent.com and docs.meshagent.com
          You have some slash commands available
    - path: /knowledge-work-plugins/commands/start.md
      text: |
          ---
          description: Initialize the productivity system and open the dashboard
          ---

          # Start Command

          > If you see unfamiliar placeholders or need to check which tools are connected, see [CONNECTORS.md](../CONNECTORS.md).

          Initialize the task and memory systems, then open the unified dashboard.

          ## Instructions

          ### 1. Check What Exists

          Check the working directory for:
          - `TASKS.md` — task list
          - `CLAUDE.md` — working memory
          - `memory/` — deep memory directory
          - `dashboard.html` — the visual UI

          ### 2. Create What's Missing

          **If `TASKS.md` doesn't exist:** Create it with the standard template (see task-management skill). Place it in the current working directory.

          **If `dashboard.html` doesn't exist:** Copy it from `${CLAUDE_PLUGIN_ROOT}/skills/dashboard.html` to the current working directory.

          **If `CLAUDE.md` and `memory/` don't exist:** This is a fresh setup — after opening the dashboard, begin the memory bootstrap workflow (see below). Place these in the current working directory.

          ### 3. Open the Dashboard

          Do NOT use `open` or `xdg-open` — in Cowork, the agent runs in a VM and shell open commands won't reach the user's browser. Instead, tell the user: "Dashboard is ready at `dashboard.html`. Open it from your file browser to get started."

          ### 4. Orient the User

          If everything was already initialized:
          ```
          Dashboard open. Your tasks and memory are both loaded.
          - /productivity:update to sync tasks and check memory
          - /productivity:update --comprehensive for a deep scan of all activity
          ```

          If memory hasn't been bootstrapped yet, continue to step 5.

          ### 5. Bootstrap Memory (First Run Only)

          Only do this if `CLAUDE.md` and `memory/` don't exist yet.

          The best source of workplace language is the user's actual task list. Real tasks = real shorthand.

          **Ask the user:**
          ```
          Where do you keep your todos or task list? This could be:
          - A local file (e.g., TASKS.md, todo.txt)
          - An app (e.g. Asana, Linear, Jira, Notion, Todoist)
          - A notes file

          I'll use your tasks to learn your workplace shorthand.
          ```

          **Once you have access to the task list:**

          For each task item, analyze it for potential shorthand:
          - Names that might be nicknames
          - Acronyms or abbreviations
          - Project references or codenames
          - Internal terms or jargon

          **For each item, decode it interactively:**

          ```
          Task: "Send PSR to Todd re: Phoenix blockers"

          I see some terms I want to make sure I understand:

          1. **PSR** - What does this stand for?
          2. **Todd** - Who is Todd? (full name, role)
          3. **Phoenix** - Is this a project codename? What's it about?
          ```

          Continue through each task, asking only about terms you haven't already decoded.

          ### 6. Optional Comprehensive Scan

          After task list decoding, offer:
          ```
          Do you want me to do a comprehensive scan of your messages, emails, and documents?
          This takes longer but builds much richer context about the people, projects, and terms in your work.

          Or we can stick with what we have and add context later.
          ```

          **If they choose comprehensive scan:**

          Gather data from available MCP sources:
          - **Chat:** Recent messages, channels, DMs
          - **Email:** Sent messages, recipients
          - **Documents:** Recent docs, collaborators
          - **Calendar:** Meetings, attendees

          Build a braindump of people, projects, and terms found. Present findings grouped by confidence:
          - **Ready to add** (high confidence) — offer to add directly
          - **Needs clarification** — ask the user
          - **Low frequency / unclear** — note for later

          ### 7. Write Memory Files

          From everything gathered, create:

          **CLAUDE.md** (working memory, ~50-80 lines):
          ```markdown
          # Memory

          ## Me
          [Name], [Role] on [Team].

          ## People
          | Who | Role |
          |-----|------|
          | **[Nickname]** | [Full Name], [role] |

          ## Terms
          | Term | Meaning |
          |------|---------|
          | [acronym] | [expansion] |

          ## Projects
          | Name | What |
          |------|------|
          | **[Codename]** | [description] |

          ## Preferences
          - [preferences discovered]
          ```

          **memory/** directory:
          - `memory/glossary.md` — full decoder ring (acronyms, terms, nicknames, codenames)
          - `memory/people/{name}.md` — individual profiles
          - `memory/projects/{name}.md` — project details
          - `memory/context/company.md` — teams, tools, processes

          ### 8. Report Results

          ```
          Productivity system ready:
          - Tasks: TASKS.md (X items)
          - Memory: X people, X terms, X projects
          - Dashboard: open in browser

          Use /productivity:update to keep things current (add --comprehensive for a deep scan).
          ```

          ## Notes

          - If memory is already initialized, this just opens the dashboard
          - Nicknames are critical — always capture how people are actually referred to
          - If a source isn't available, skip it and note the gap
          - Memory grows organically through natural conversation after bootstrap
    - path: /knowledge-work-plugins/commands/update.md
      text: |
          ---
          description: Sync tasks and refresh memory from your current activity
          argument-hint: "[--comprehensive]"
          ---

          # Update Command

          > If you see unfamiliar placeholders or need to check which tools are connected, see [CONNECTORS.md](../CONNECTORS.md).

          Keep your task list and memory current. Two modes:

          - **Default:** Sync tasks from external tools, triage stale items, check memory for gaps
          - **`--comprehensive`:** Deep scan chat, email, calendar, docs — flag missed todos and suggest new memories

          ## Usage

          ```bash
          /productivity:update
          /productivity:update --comprehensive
          ```

          ## Default Mode

          ### 1. Load Current State

          Read `TASKS.md` and `memory/` directory. If they don't exist, suggest `/productivity:start` first.

          ### 2. Sync Tasks from External Sources

          Check for available task sources:
          - **Project tracker** (e.g. Asana, Linear, Jira) (if MCP available)
          - **GitHub Issues** (if in a repo): `gh issue list --assignee=@me`

          If no sources are available, skip to Step 3.

          **Fetch tasks assigned to the user** (open/in-progress). Compare against TASKS.md:

          | External task | TASKS.md match? | Action |
          |---------------|-----------------|--------|
          | Found, not in TASKS.md | No match | Offer to add |
          | Found, already in TASKS.md | Match by title (fuzzy) | Skip |
          | In TASKS.md, not in external | No match | Flag as potentially stale |
          | Completed externally | In Active section | Offer to mark done |

          Present diff and let user decide what to add/complete.

          ### 3. Triage Stale Items

          Review Active tasks in TASKS.md and flag:
          - Tasks with due dates in the past
          - Tasks in Active for 30+ days
          - Tasks with no context (no person, no project)

          Present each for triage: Mark done? Reschedule? Move to Someday?

          ### 4. Decode Tasks for Memory Gaps

          For each task, attempt to decode all entities (people, projects, acronyms, tools, links):

          ```
          Task: "Send PSR to Todd re: Phoenix blockers"

          Decode:
          - PSR → ✓ Pipeline Status Report (in glossary)
          - Todd → ✓ Todd Martinez (in people/)
          - Phoenix → ? Not in memory
          ```

          Track what's fully decoded vs. what has gaps.

          ### 5. Fill Gaps

          Present unknown terms grouped:
          ```
          I found terms in your tasks I don't have context for:

          1. "Phoenix" (from: "Send PSR to Todd re: Phoenix blockers")
             → What's Phoenix?

          2. "Maya" (from: "sync with Maya on API design")
             → Who is Maya?
          ```

          Add answers to the appropriate memory files (people/, projects/, glossary.md).

          ### 6. Capture Enrichment

          Tasks often contain richer context than memory. Extract and update:
          - **Links** from tasks → add to project/people files
          - **Status changes** ("launch done") → update project status, demote from CLAUDE.md
          - **Relationships** ("Todd's sign-off on Maya's proposal") → cross-reference people
          - **Deadlines** → add to project files

          ### 7. Report

          ```
          Update complete:
          - Tasks: +3 from project tracker (e.g. Asana), 1 completed, 2 triaged
          - Memory: 2 gaps filled, 1 project enriched
          - All tasks decoded ✓
          ```

          ## Comprehensive Mode (`--comprehensive`)

          Everything in Default Mode, plus a deep scan of recent activity.

          ### Extra Step: Scan Activity Sources

          Gather data from available MCP sources:
          - **Chat:** Search recent messages, read active channels
          - **Email:** Search sent messages
          - **Documents:** List recently touched docs
          - **Calendar:** List recent + upcoming events

          ### Extra Step: Flag Missed Todos

          Compare activity against TASKS.md. Surface action items that aren't tracked:

          ```
          ## Possible Missing Tasks

          From your activity, these look like todos you haven't captured:

          1. From chat (Jan 18):
             "I'll send the updated mockups by Friday"
             → Add to TASKS.md?

          2. From meeting "Phoenix Standup" (Jan 17):
             You have a recurring meeting but no Phoenix tasks active
             → Anything needed here?

          3. From email (Jan 16):
             "I'll review the API spec this week"
             → Add to TASKS.md?
          ```

          Let user pick which to add.

          ### Extra Step: Suggest New Memories

          Surface new entities not in memory:

          ```
          ## New People (not in memory)
          | Name | Frequency | Context |
          |------|-----------|---------|
          | Maya Rodriguez | 12 mentions | design, UI reviews |
          | Alex K | 8 mentions | DMs about API |

          ## New Projects/Topics
          | Name | Frequency | Context |
          |------|-----------|---------|
          | Starlight | 15 mentions | planning docs, product |

          ## Suggested Cleanup
          - **Horizon project** — No mentions in 30 days. Mark completed?
          ```

          Present grouped by confidence. High-confidence items offered to add directly; low-confidence items asked about.

          ## Notes

          - Never auto-add tasks or memories without user confirmation
          - External source links are preserved when available
          - Fuzzy matching on task titles handles minor wording differences
          - Safe to run frequently — only updates when there's new info
          - `--comprehensive` always runs interactively
    - path: /knowledge-work-plugins/skills/memory-management/SKILL.md
      text: |
          ---
          name: memory-management
          description: Two-tier memory system that makes Claude a true workplace collaborator. Decodes shorthand, acronyms, nicknames, and internal language so Claude understands requests like a colleague would. CLAUDE.md for working memory, memory/ directory for the full knowledge base.
          ---

          # Memory Management

          Memory makes Claude your workplace collaborator - someone who speaks your internal language.

          ## The Goal

          Transform shorthand into understanding:

          ```
          User: "ask todd to do the PSR for oracle"
                        ↓ Claude decodes
          "Ask Todd Martinez (Finance lead) to prepare the Pipeline Status Report
           for the Oracle Systems deal ($2.3M, closing Q2)"
          ```

          Without memory, that request is meaningless. With memory, Claude knows:
          - **todd** → Todd Martinez, Finance lead, prefers Slack
          - **PSR** → Pipeline Status Report (weekly sales doc)
          - **oracle** → Oracle Systems deal, not the company

          ## Architecture

          ```
          CLAUDE.md          ← Hot cache (~30 people, common terms)
          memory/
            glossary.md      ← Full decoder ring (everything)
            people/          ← Complete profiles
            projects/        ← Project details
            context/         ← Company, teams, tools
          ```

          **CLAUDE.md (Hot Cache):**
          - Top ~30 people you interact with most
          - ~30 most common acronyms/terms
          - Active projects (5-15)
          - Your preferences
          - **Goal: Cover 90% of daily decoding needs**

          **memory/glossary.md (Full Glossary):**
          - Complete decoder ring - everyone, every term
          - Searched when something isn't in CLAUDE.md
          - Can grow indefinitely

          **memory/people/, projects/, context/:**
          - Rich detail when needed for execution
          - Full profiles, history, context

          ## Lookup Flow

          ```
          User: "ask todd about the PSR for phoenix"

          1. Check CLAUDE.md (hot cache)
             → Todd? ✓ Todd Martinez, Finance
             → PSR? ✓ Pipeline Status Report
             → Phoenix? ✓ DB migration project

          2. If not found → search memory/glossary.md
             → Full glossary has everyone/everything

          3. If still not found → ask user
             → "What does X mean? I'll remember it."
          ```

          This tiered approach keeps CLAUDE.md lean (~100 lines) while supporting unlimited scale in memory/.

          ## File Locations

          - **Working memory:** `CLAUDE.md` in current working directory
          - **Deep memory:** `memory/` subdirectory

          ## Working Memory Format (CLAUDE.md)

          Use tables for compactness. Target ~50-80 lines total.

          ```markdown
          # Memory

          ## Me
          [Name], [Role] on [Team]. [One sentence about what I do.]

          ## People
          | Who | Role |
          |-----|------|
          | **Todd** | Todd Martinez, Finance lead |
          | **Sarah** | Sarah Chen, Engineering (Platform) |
          | **Greg** | Greg Wilson, Sales |
          → Full list: memory/glossary.md, profiles: memory/people/

          ## Terms
          | Term | Meaning |
          |------|---------|
          | PSR | Pipeline Status Report |
          | P0 | Drop everything priority |
          | standup | Daily 9am sync |
          → Full glossary: memory/glossary.md

          ## Projects
          | Name | What |
          |------|------|
          | **Phoenix** | DB migration, Q2 launch |
          | **Horizon** | Mobile app redesign |
          → Details: memory/projects/

          ## Preferences
          - 25-min meetings with buffers
          - Async-first, Slack over email
          - No meetings Friday afternoons
          ```

          ## Deep Memory Format (memory/)

          **memory/glossary.md** - The decoder ring:
          ```markdown
          # Glossary

          Workplace shorthand, acronyms, and internal language.

          ## Acronyms
          | Term | Meaning | Context |
          |------|---------|---------|
          | PSR | Pipeline Status Report | Weekly sales doc |
          | OKR | Objectives & Key Results | Quarterly planning |
          | P0/P1/P2 | Priority levels | P0 = drop everything |

          ## Internal Terms
          | Term | Meaning |
          |------|---------|
          | standup | Daily 9am sync in #engineering |
          | the migration | Project Phoenix database work |
          | ship it | Deploy to production |
          | escalate | Loop in leadership |

          ## Nicknames → Full Names
          | Nickname | Person |
          |----------|--------|
          | Todd | Todd Martinez (Finance) |
          | T | Also Todd Martinez |

          ## Project Codenames
          | Codename | Project |
          |----------|---------|
          | Phoenix | Database migration |
          | Horizon | New mobile app |
          ```

          **memory/people/{name}.md:**
          ```markdown
          # Todd Martinez

          **Also known as:** Todd, T
          **Role:** Finance Lead
          **Team:** Finance
          **Reports to:** CFO (Michael Chen)

          ## Communication
          - Prefers Slack DM
          - Quick responses, very direct
          - Best time: mornings

          ## Context
          - Handles all PSRs and financial reporting
          - Key contact for deal approvals over $500k
          - Works closely with Sales on forecasting

          ## Notes
          - Cubs fan, likes talking baseball
          ```

          **memory/projects/{name}.md:**
          ```markdown
          # Project Phoenix

          **Codename:** Phoenix
          **Also called:** "the migration"
          **Status:** Active, launching Q2

          ## What It Is
          Database migration from legacy Oracle to PostgreSQL.

          ## Key People
          - Sarah - tech lead
          - Todd - budget owner
          - Greg - stakeholder (sales impact)

          ## Context
          $1.2M budget, 6-month timeline. Critical path for Horizon project.
          ```

          **memory/context/company.md:**
          ```markdown
          # Company Context

          ## Tools & Systems
          | Tool | Used for | Internal name |
          |------|----------|---------------|
          | Slack | Communication | - |
          | Asana | Engineering tasks | - |
          | Salesforce | CRM | "SF" or "the CRM" |
          | Notion | Docs/wiki | - |

          ## Teams
          | Team | What they do | Key people |
          |------|--------------|------------|
          | Platform | Infrastructure | Sarah (lead) |
          | Finance | Money stuff | Todd (lead) |
          | Sales | Revenue | Greg |

          ## Processes
          | Process | What it means |
          |---------|---------------|
          | Weekly sync | Monday 10am all-hands |
          | Ship review | Thursday deploy approval |
          ```

          ## How to Interact

          ### Decoding User Input (Tiered Lookup)

          **Always** decode shorthand before acting on requests:

          ```
          1. CLAUDE.md (hot cache)     → Check first, covers 90% of cases
          2. memory/glossary.md        → Full glossary if not in hot cache
          3. memory/people/, projects/ → Rich detail when needed
          4. Ask user                  → Unknown term? Learn it.
          ```

          Example:
          ```
          User: "ask todd to do the PSR for oracle"

          CLAUDE.md lookup:
            "todd" → Todd Martinez, Finance ✓
            "PSR" → Pipeline Status Report ✓
            "oracle" → (not in hot cache)

          memory/glossary.md lookup:
            "oracle" → Oracle Systems deal ($2.3M) ✓

          Now Claude can act with full context.
          ```

          ### Adding Memory

          When user says "remember this" or "X means Y":

          1. **Glossary items** (acronyms, terms, shorthand):
             - Add to memory/glossary.md
             - If frequently used, add to CLAUDE.md Quick Glossary

          2. **People:**
             - Create/update memory/people/{name}.md
             - Add to CLAUDE.md Key People if important
             - **Capture nicknames** - critical for decoding

          3. **Projects:**
             - Create/update memory/projects/{name}.md
             - Add to CLAUDE.md Active Projects if current
             - **Capture codenames** - "Phoenix", "the migration", etc.

          4. **Preferences:** Add to CLAUDE.md Preferences section

          ### Recalling Memory

          When user asks "who is X" or "what does X mean":

          1. Check CLAUDE.md first
          2. Check memory/ for full detail
          3. If not found: "I don't know what X means yet. Can you tell me?"

          ### Progressive Disclosure

          1. Load CLAUDE.md for quick parsing of any request
          2. Dive into memory/ when you need full context for execution
          3. Example: drafting an email to todd about the PSR
             - CLAUDE.md tells you Todd = Todd Martinez, PSR = Pipeline Status Report
             - memory/people/todd-martinez.md tells you he prefers Slack, is direct

          ## Bootstrapping

          Use `/productivity:start` to initialize by scanning your chat, calendar, email, and documents. Extracts people, projects, and starts building the glossary.

          ## Conventions

          - **Bold** terms in CLAUDE.md for scannability
          - Keep CLAUDE.md under ~100 lines (the "hot 30" rule)
          - Filenames: lowercase, hyphens (`todd-martinez.md`, `project-phoenix.md`)
          - Always capture nicknames and alternate names
          - Glossary tables for easy lookup
          - When something's used frequently, promote it to CLAUDE.md
          - When something goes stale, demote it to memory/ only

          ## What Goes Where

          | Type | CLAUDE.md (Hot Cache) | memory/ (Full Storage) |
          |------|----------------------|------------------------|
          | Person | Top ~30 frequent contacts | glossary.md + people/{name}.md |
          | Acronym/term | ~30 most common | glossary.md (complete list) |
          | Project | Active projects only | glossary.md + projects/{name}.md |
          | Nickname | In Key People if top 30 | glossary.md (all nicknames) |
          | Company context | Quick reference only | context/company.md |
          | Preferences | All preferences | - |
          | Historical/stale | ✗ Remove | ✓ Keep in memory/ |

          ## Promotion / Demotion

          **Promote to CLAUDE.md when:**
          - You use a term/person frequently
          - It's part of active work

          **Demote to memory/ only when:**
          - Project completed
          - Person no longer frequent contact
          - Term rarely used

          This keeps CLAUDE.md fresh and relevant.
    - path: /knowledge-work-plugins/skills/task-management/SKILL.md
      text: |
          ---
          name: task-management
          description: Simple task management using a shared TASKS.md file. Reference this when the user asks about their tasks, wants to add/complete tasks, or needs help tracking commitments.
          ---

          # Task Management

          Tasks are tracked in a simple `TASKS.md` file that both you and the user can edit.

          ## File Location

          **Always use `TASKS.md` in the current working directory.**

          - If it exists, read/write to it
          - If it doesn't exist, create it with the template below

          ## Dashboard Setup (First Run)

          A visual dashboard is available for managing tasks and memory. **On first interaction with tasks:**

          1. Check if `dashboard.html` exists in the current working directory
          2. If not, copy it from `${CLAUDE_PLUGIN_ROOT}/skills/dashboard.html` to the current working directory
          3. Inform the user: "I've added the dashboard. Run `/productivity:start` to set up the full system."

          The task board:
          - Reads and writes to the same `TASKS.md` file
          - Auto-saves changes
          - Watches for external changes (syncs when you edit via CLI)
          - Supports drag-and-drop reordering of tasks and sections

          ## Format & Template

          When creating a new TASKS.md, use this exact template (without example tasks):

          ```markdown
          # Tasks

          ## Active

          ## Waiting On

          ## Someday

          ## Done
          ```

          Task format:
          - `- [ ] **Task title** - context, for whom, due date`
          - Sub-bullets for additional details
          - Completed: `- [x] ~~Task~~ (date)`

          ## How to Interact

          **When user asks "what's on my plate" / "my tasks":**
          - Read TASKS.md
          - Summarize Active and Waiting On sections
          - Highlight anything overdue or urgent

          **When user says "add a task" / "remind me to":**
          - Add to Active section with `- [ ] **Task**` format
          - Include context if provided (who it's for, due date)

          **When user says "done with X" / "finished X":**
          - Find the task
          - Change `[ ]` to `[x]`
          - Add strikethrough: `~~task~~`
          - Add completion date
          - Move to Done section

          **When user asks "what am I waiting on":**
          - Read the Waiting On section
          - Note how long each item has been waiting

          ## Conventions

          - **Bold** the task title for scannability
          - Include "for [person]" when it's a commitment to someone
          - Include "due [date]" for deadlines
          - Include "since [date]" for waiting items
          - Sub-bullets for additional context
          - Keep Done section for ~1 week, then clear old items

          ## Extracting Tasks

          When summarizing meetings or conversations, offer to add extracted tasks:
          - Commitments the user made ("I'll send that over")
          - Action items assigned to them
          - Follow-ups mentioned

          Ask before adding - don't auto-add without confirmation.
  environment:
    - name: MESHAGENT_TOKEN
      token:  
        identity: claude-productivity
        api:
          livekit: {}
          queues:
            list: true
          messaging:
            broadcast: true
            list: true
            send: true
          database:
            list_tables: true
          sync: {}
          storage: {}
          containers:
            logs: true
            use_containers: true
          developer:
            logs: true
          agents:
            register_agent: true
            register_public_toolkit: true
            register_private_toolkit: true
            call: true
            use_agents: true
            use_tools: true
            allowed_toolkits: null
